# ---------------------------------------------------------
# This file is managed by Ansible, manual changes will be
# overwritten on the next run.
# ---------------------------------------------------------

/var/log/nginx/*.log {
	monthly
	missingok
	rotate 120
	compress
	delaycompress
	notifempty
	create 0640 www-data adm
	sharedscripts
	dateext
    dateformat .%Y-%m
	prerotate
		if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
			run-parts /etc/logrotate.d/httpd-prerotate; \
		fi \
	endscript
	postrotate
		invoke-rc.d nginx rotate >/dev/null 2>&1
	endscript
}

/var/log/nginx/*/*.log {
	monthly
	missingok
	rotate 12
	compress
	delaycompress
	notifempty
	create 0640 www-data adm
	sharedscripts
	dateext
    dateformat .%Y-%m
	prerotate
		if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
			run-parts /etc/logrotate.d/httpd-prerotate; \
		fi \
	endscript
	postrotate
		invoke-rc.d nginx rotate >/dev/null 2>&1
	endscript
}
